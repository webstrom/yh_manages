import manages from '../scss/index.scss'

import Vue from 'vue'
import './layui'
import pack from './package'
new Vue({
	el:'#manages_users_register',
	data:{
		checkboxData:[
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市滨江区泰安路1688号',
				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
			{
				sik:1,
				loginname:'1700011871',
				role:'李世建',
				phone:'13923345678',
				name:'男',
				jgbh:'27',
				qd:'421182******12345',
				state:'新注册',
				sf:'2019.01.25 16:45',
				dis:'中国浙江省杭州市 滨江区泰安路1688号',

				qds:'X1020',
				yc:'否',
				ywy:'超级管理员',
				sbm:'9999',
				dl:'是',
				ed:'5000',
				ye:'5000',
			},
		],
		checkboxList:[],
		checked: false,
		address:pack,
		addressChildren:[]
	},
	watch: {
		//深度 watcher
		checkboxList: {
			handler: function (val, oldVal) {
				if (this.checkboxList.length === this.checkboxData.length) {
					this.checked=true;
				} else {
					this.checked=false;
				}
				//判断修改是否可以使用

				console.log(this.checkboxList)
			},
			deep: true
		}
	},
	methods:{
		checkedAll: function() {
			if (!this.checked) {
				this.checkboxList = [];
				this.checkboxData.forEach( (index,item) => {
					this.checkboxList.push(item);
				});
			} else {
				this.checkboxList = [];
			}
			console.log('全选/反选：'+this.checkboxList)
		},
		addUser:function(){
			var that = this;
			window.parent.layui.use('layer',function () {
				var layer = window.parent.layui.layer;
				layer.open({
					type: 1,
					area: ['800px','auto'],
					title:['添加用户信息','background:#4A8BF5;color:#fff;font-size:24px;height:50px'],
					id:'layer-role',
					shade: .3,
					btn:["确定","取消"],
					btnAlign:'c',
					shadeClose: true, //开启遮罩关闭
					content:$('#yh_layer').html(),
					success:function (layero) {
						var btn = layero.find('.layui-layer-btn');
						btn.css({paddingBottom:'50px',zIndex:'1000',position: 'relative'});
						btn.find('a').css({padding:'8px 40px',border:'2px solid #1E9FFF'});
						btn.find('.layui-layer-btn1').css({color:'#1E9FFF'});
					},
					yes:function(number,determine){

					}
				})
			})
		},
		Remarks:function(){
			window.parent.layui.use('layer',function () {
				var layer = window.parent.layui.layer;
				layer.open({
					type: 1,
					area: ['800px','auto'],
					title:['备注','background:#4A8BF5;color:#fff;font-size:24px;height:50px'],
					id:'layer-role',
					shade: .3,
					btn:["确定","取消"],
					btnAlign:'c',
					shadeClose: true, //开启遮罩关闭
					content:$('#yh_layer_1').html(),
					success:function (layero) {
						var btn = layero.find('.layui-layer-btn');
						btn.css({paddingBottom:'50px',zIndex:'1000',position: 'relative'});
						btn.find('a').css({padding:'8px 40px',border:'2px solid #1E9FFF'});
						btn.find('.layui-layer-btn1').css({color:'#1E9FFF'});
					},
					yes:function(number,determine){

					}
				})
			})
		},
		Authentication:function(){
			var that = this;
			var htmlLayer = '';
			var dataNew = '';
			var vm;
			window.parent.layui.use('layer',function () {
				var layer = window.parent.layui.layer;
				layer.open({
					type: 1,
					area: ['550px','auto'],
					title:['认证','background:#4A8BF5;color:#fff;font-size:24px;height:50px'],
					id:'layer-role-center_1',
					shade: .3,
					btn:["下一步","取消"],
					btnAlign:'c',
					shadeClose: true, //开启遮罩关闭
					content:$('#yh_layer_6').html(),
					success:function (layero) {
						var btn = layero.find('.layui-layer-btn');
						btn.css({paddingBottom:'50px',zIndex:'1000',position: 'relative'});
						btn.find('a').css({padding:'8px 40px',border:'2px solid #1E9FFF'});
						btn.find('.layui-layer-btn1').css({color:'#1E9FFF'});
					},
					yes:function(number,determine){
						if(determine.find('select option:selected').val() === '请选择'){
							layer.msg('请选择选择认证类型',{icon:7});
							return false;
						}else if(determine.find('select option:selected').val() === '运营商'||determine.find('select option:selected').val() === '京东'){
							htmlLayer = $('#yh_layer_9').html()
						}else if(determine.find('select option:selected').val() === '征信'){
							htmlLayer = $('#yh_layer_10').html()
						}else if (determine.find('select option:selected').val() === '信用卡账单'){
							htmlLayer = $('#yh_layer_8').html()
						}else if(determine.find('select option:selected').val() === '淘宝'){
							htmlLayer = $('#yh_layer_11').html()
						}else if(determine.find('select option:selected').val() === '公积金'||determine.find('select option:selected').val() === '社保'){
							htmlLayer = $('#yh_layer_12').html()
						}
						layer.open({
							type: 1,
							area: ['500px','auto'],
							title:[determine.find('select option:selected').val(),'background:#4A8BF5;color:#fff;font-size:24px;height:50px'],
							id:'layer-role-center_2',
							shade: .3,
							btn:["确定","取消"],
							btnAlign:'c',
							shadeClose: true, //开启遮罩关闭
							content:htmlLayer,
							success:function (layero) {
								console.log(layero);
								var btn = layero.find('.layui-layer-btn');
								btn.css({paddingBottom:'50px',zIndex:'1000',position: 'relative'});
								btn.find('a').css({padding:'8px 40px',border:'2px solid #1E9FFF'});
								btn.find('.layui-layer-btn1').css({color:'#1E9FFF'});
								vm = new Vue({
									data: {
										address:pack,
										addressChildren:that.addressChildren,
									},
									methods: {
										option:function (e) {
											var curr = this;
											//dataNew = layero.find('#yh_address option:selected').val();
											dataNew = $(e.target).find('option:selected').val();
											console.log(dataNew);
											$.each(curr.address,function (i) {
												if(dataNew === curr.address[i].name){
													Vue.set(curr,'addressChildren',curr.address[i].city)
												}
											});
										}
									}
								});
								vm.$mount(layero[0].childNodes[1]);
							},
							yes:function(number,determine){
								console.log(123456789);
								vm.$destroy();
								layer.close(number)
							}
						})
					}
				})
			})
		},
		AuthenticationList:function(){
			var that = this;
			window.parent.layui.use('layer',function () {
				var layer = window.parent.layui.layer;
				var vm;
				layer.open({
					type: 1,
					area: ['800px','auto'],
					title:['设置认证列表','background:#4A8BF5;color:#fff;font-size:24px;height:50px'],
					id:'layer-role-center_1',
					shade: .3,
					btn:["确定","取消"],
					btnAlign:'c',
					shadeClose: true, //开启遮罩关闭
					content:$('#yh_layer_13').html(),
					success:function (layero) {
						var btn = layero.find('.layui-layer-btn');
						btn.css({paddingBottom:'50px',zIndex:'1000',position: 'relative'});
						btn.find('a').css({padding:'8px 40px',border:'2px solid #1E9FFF'});
						btn.find('.layui-layer-btn1').css({color:'#1E9FFF'});
						vm = new Vue({
							data: {
								list:[
									{name:'运营商认证'},
									{name:'京东认证'},
									{name:'社保认证'},
								],
							},
							methods: {
								option:function (e) {
									var curr = this;

								}
							}
						});
						vm.$mount(layero[0].childNodes[1]);
					},
					yes:function(number,determine){
						console.log(123456);

					}
				})
			})
		},
		ModificationLimit:function(){
			var that = this;
			window.parent.layui.use('layer',function () {
				var layer = window.parent.layui.layer;
				layer.open({
					type: 1,
					area: ['900px','auto'],
					title:['修改','background:#4A8BF5;color:#fff;font-size:24px;height:50px'],
					id:'layer-role-center_1',
					shade: .3,
					btn:["确定","取消"],
					btnAlign:'c',
					shadeClose: true, //开启遮罩关闭
					content:$('#yh_layer_7').html(),
					success:function (layero) {
						var btn = layero.find('.layui-layer-btn');
						btn.css({paddingBottom:'50px',zIndex:'1000',position: 'relative'});
						btn.find('a').css({padding:'8px 40px',border:'2px solid #1E9FFF'});
						btn.find('.layui-layer-btn1').css({color:'#1E9FFF'});
					},
					yes:function(number,determine){

					}
				})
			})
		},
		managesPage:function () {
			layui.use('laypage', function(){
				var laypage = layui.laypage;

				//执行一个laypage实例
				laypage.render({
					elem: 'yh_manages_lauerpage' //注意，这里的 test1 是 ID，不用加 # 号
					,count: 50 //数据总数，从服务端得到
					,theme:'manages'
					,limit:10
					,limits:[10,20,50,100]
					,prev:"上一页"
					,next:"下一页"
					,first:1
					,last:50
					,layout:['count','prev','page','next','limit','skip']
					,jump: function(obj, first){
						console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
						console.log(obj.limit); //得到每页显示的条数
						console.log(first)
					}
				});
			});
		},
		laydateTime:function () {
			layui.use('laydate', function(){
				var laydate = layui.laydate;
				//执行一个laydate实例
				laydate.render({
					elem: '#manages_time' //指定元素
					,theme:'icon_yh'
				});
				laydate.render({
					elem: '#manages_time_1' //指定元素
					,theme:'icon_yh'
				});
			});
		}
	},
	mounted() {
		this.managesPage();
		this.laydateTime();
		console.log(window.parent.find('body .yh_province select').html);
	}
});